<!doctype html>
<html lang="de">
		<head>
			<meta charset="utf-8" />
			<title>HTML-Präsentation generieren</title>
			<link rel="stylesheet" type="text/css"
				href="slides/slides.css" />
		</head>
	<body>
		<div class="slides">
			<div>
				<div>
					<h1>HTML-Präsentation generieren</h1>
				</div>
				<ul>
					<li>
						Diese Datei beschreibt Code, um aus den
						<code>hx</code>-Quelldateien
						HTML-Präsentationen zu erzeugen
					</li>
				</ul>
			</div>
				<div>
					<div><code>
						<span class="add">@add(<span class="macro-name">global elements</span>)</span><br/>
						<span class="in1"></span><span class="type">struct SourceElement</span> {<br/>
						<span class="in2"></span><span class="type">struct SourceElement *</span><span class="var">link</span>;<br/>
						<span class="in2"></span><span class="type">char</span> <span class="var">path</span>[];<br/>
						<span class="in1"></span>};<br/>
						<span class="end">@end(<span class="macro-name">global elements</span>)</span>
					</code></div>
					<ul>
						<li>
							Alle Dateien, die noch herausgeschrieben
							werden müssen, werden in einer Liste
							vorgehalten
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">global elements</span>)</span><br/>
						<span class="in1"></span><span class="type">struct SourceElement</span> *createSourceElement(<br/>
						<span class="in2"></span><span class="type">const char *</span><span class="var">path</span><br/>
						<span class="in1"></span>) {<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">path</span>);<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">len</span> = <span class="fn">strlen</span>(<span class="var">path</span>) + <span class="num">1</span>;<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">size</span> =<br/>
						<span class="in3"></span><span class="var">len</span> + <span class="fn">sizeof</span>(<span class="type">struct SourceElement</span>);<br/>
						<span class="in2"></span><span class="type">struct SourceElement *</span><span class="var">se</span> =<br/>
						<span class="in3"></span><span class="fn">malloc</span>(<span class="var">size</span>);<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">se</span>);<br/>
						<span class="in2"></span><span class="var">se</span>-&gt;<span class="var">link</span> = <span class="keyword">NULL</span>;<br/>
						<span class="in2"></span><span class="fn">memcpy</span>(<span class="var">se</span>-&gt;<span class="var">path</span>, <span class="var">path</span>, <span class="var">len</span>);<br/>
						<span class="in2"></span><span class="keyword">return</span> <span class="var">se</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">global elements</span>)</span>
					</code></div>
					<ul>
						<li>
							Die Größe der Struktur wird dynamisch
							berechnet
						</li><li>
							So dass der Name mit abschließenden
							Null-Byte reinpasst
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write HTML file</span>)</span><br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">argc</span> &gt; <span class="num">1</span>) {<br/>
						<span class="in2"></span><span class="type">struct SourceElement *</span><span class="var">cur</span> =<br/>
						<span class="in3"></span><span class="fn">createSourceElement</span>(<span class="var">argv</span>[<span class="num">1</span>]);<br/>
						<span class="in2"></span><span class="type">struct SourceElement *</span><span class="var">end</span> = <span class="var">cur</span>;<br/>
						<span class="in2"></span><span class="keyword">while</span> (<span class="var">cur</span>) {<br/>
						<span class="in3"></span><span class="expand">@expand(<span class="macro-name">write cur HTML file</span>)</span>;<br/>
						<span class="in3"></span><span class="type">struct SourceElement *</span><span class="var">next</span> =<br/>
						<span class="in4"></span><span class="var">cur</span>-&gt;<span class="var">link</span>;<br/>
						<span class="in3"></span><span class="fn">free</span>(<span class="var">cur</span>);<br/>
						<span class="in3"></span><span class="var">cur</span> = <span class="var">next</span>;<br/>
						<span class="in2"></span>}<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">write HTML file</span>)</span>
					</code></div>
					<ul>
						<li>
							Nur wenn die erste Datei über die
							Aufrufparameter übergeben wurde, werden
							HTML-Dateien generiert
						</li><li>
							Beim Lesen von der Standard-Eingabe ist der
							Dateiname unbekannt
						</li><li>
							Beim Lesen der Datei können weitere
							Dateien in die Liste eingefügt werden
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">global elements</span>)</span><br/>
						<span class="in1"></span><span class="keyword">bool</span> <span class="fn">hasSuffix</span>(<br/>
						<span class="in2"></span><span class="type">const char *</span><span class="var">str</span>,<br/>
						<span class="in2"></span><span class="type">const char *</span><span class="var">suff</span><br/>
						<span class="in1"></span>) {<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">str</span>); <span class="fn">ASSERT</span>(<span class="var">suff</span>);<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">sl</span> = <span class="fn">strlen</span>(<span class="var">str</span>);<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">su</span> = <span class="fn">strlen</span>(<span class="var">suff</span>);<br/>
						<span class="in2"></span><span class="keyword">return</span> <span class="var">sl</span> &gt;= <span class="var">su</span> &amp;&amp; <span class="num">0</span> == <span class="fn">memcmp</span>(<br/>
						<span class="in3"></span><span class="var">str</span> + <span class="var">sl</span> - <span class="var">su</span>, <span class="var">suff</span>, <span class="var">su</span><br/>
						<span class="in2"></span>);<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">global elements</span>)</span>
					</code></div>
					<ul>
						<li>
							Um zu prüfen, ob Dateinamen die richtige
							Endung haben, gibt es eine extra Funktion
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write cur HTML file</span>)</span><br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="fn">hasSuffix</span>(<span class="var">cur</span>-&gt;<span class="var">path</span>, <span class="str">".hx"</span>)) {<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">len</span> = <span class="fn">strlen</span>(<span class="var">cur</span>-&gt;<span class="var">path</span>) + <span class="num">3</span>;<br/>
						<span class="in2"></span><span class="type">char *</span><span class="var">outPath</span> = <span class="fn">malloc</span>(<span class="var">len</span>);<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">outPath</span>);<br/>
						<span class="in2"></span><span class="fn">memcpy</span>(<span class="var">outPath</span>, <span class="var">cur</span>-&gt;<span class="var">path</span>, <span class="var">len</span> - <span class="num">6</span>);<br/>
						<span class="in2"></span><span class="fn">strcpy</span>(<span class="var">outPath</span> + <span class="var">len</span> - <span class="num">6</span>, <span class="str">".html"</span>);<br/>
						<span class="in2"></span><span class="type">FILE *</span><span class="var">out</span> = <span class="fn">fopen</span>(<span class="var">outPath</span>, <span class="str">"w"</span>);<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">out</span>);<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">write cur HTML file to out</span>)</span>;<br/>
						<span class="in2"></span><span class="fn">fclose</span>(<span class="var">out</span>);<br/>
						<span class="in2"></span><span class="fn">free</span>(<span class="var">outPath</span>);<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">write cur HTML file</span>)</span>
					</code></div>
					<ul>
						<li>
							Nur <code>hx</code>-Dateien werden in HTML
							konvertiert
						</li><li>
							Die HTML hat den gleichen Pfad mit der 
							Endung <code>.html</code>
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write cur HTML file to out</span>)</span> <br/>
						<span class="in1"></span><span class="type">FILE *</span><span class="var">in</span> = <span class="fn">fopen</span>(<span class="var">cur</span>-&gt;<span class="var">path</span>, <span class="str">"r"</span>);<br/>
						<span class="in1"></span><span class="fn">ASSERT</span>(<span class="var">in</span>);<br/>
						<span class="in1"></span><span class="expand">@expand(<span class="macro-name">write HTML file from in to out</span>)</span>;<br/>
						<span class="in1"></span><span class="fn">fclose</span>(<span class="var">in</span>);<br/>
						<span class="end">@end(<span class="macro-name">write HTML html file to out</span>)</span>
					</code></div>
					<ul>
						<li>
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write HTML file from in to out</span>)</span> {<br/>
						<span class="in1"></span><span class="type">int</span> <span class="var">headerLevel</span> = <span class="num">0</span>, <span class="var">codeLevel</span> = <span class="num">0</span>;<br/>
						<span class="in1"></span><span class="type">bool</span> <span class="var">wroteHeader</span> = <span class="keyword">false</span>;<br/>
						<span class="in1"></span><span class="type">bool</span> <span class="var">inCode</span> = <span class="keyword">false</span>;<br/>
						<span class="in1"></span><span class="type">bool</span> <span class="var">inNotes</span> = <span class="keyword">false</span>;<br/>
						<span class="in1"></span><span class="type">bool</span> <span class="var">startOfLine</span> = <span class="keyword">true</span>;<br/>
						<span class="in1"></span><span class="type">char</span> <span class="var">buffer</span>[<span class="num">100</span>];<br/>
						<span class="in1"></span><span class="type">char *</span><span class="var">bc</span> = <span class="keyword">NULL</span>;<br/>
						<span class="in1"></span><span class="type">char</span> <span class="var">special</span> = <span class="str">'\0'</span>;<br/>
						<span class="in1"></span><span class="keyword">for</span> (;;) {<br/>
						<span class="in2"></span><span class="type">int</span> <span class="var">ch</span> = <span class="fn">fgetc</span>(<span class="var">in</span>);<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">process ch for HTML</span>)</span>;<br/>
						<span class="in2"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="keyword">EOF</span>) { <span class="keyword">break</span>; }<br/>
						<span class="in1"></span>}<br/>
						} <span class="end">@end(<span class="macro-name">write HTML file from in to out</span>)</span>
					</code></div>
					<ul>
						<li>
						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">inCode</span>) {<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">process ch in HTML code</span>)</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">inNotes</span>) {<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">process ch in HTML notes</span>)</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="str">'#'</span> &amp;&amp; <span class="var">startOfLine</span>) {<br/>
						<span class="in2"></span>++<span class="var">headerLevel</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="str">'\n'</span> &amp;&amp; <span class="var">headerLevel</span>) {<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">process header in HTML</span>)</span>;<br/>
						<span class="in2"></span><span class="var">startOfLine</span> = <span class="keyword">true</span>;<br/>
						<span class="in2"></span><span class="var">headerLevel</span> = <span class="num">0</span>;<br/>
						<span class="in2"></span><span class="var">bc</span> = <span class="keyword">NULL</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">headerLevel</span> &amp;&amp; <span class="var">bc</span>) {<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<br/>
						<span class="in3"></span>bc &lt; buffer + sizeof(buffer) - <span class="num">1</span><br/>
						<span class="in2"></span>);<br/>
						<span class="in2"></span>*<span class="var">bc</span>++ = <span class="var">ch</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">headerLevel</span> &amp;&amp; <span class="var">ch</span> &gt; <span class="str">' '</span>) {<br/>
						<span class="in2"></span><span class="var">bc</span> = <span class="var">buffer</span>;<br/>
						<span class="in2"></span>*<span class="var">bc</span>++ = <span class="var">ch</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">startOfLine</span> &amp;&amp; <span class="var">ch</span> == <span class="str">'`'</span>) {<br/>
						<span class="in2"></span>++<span class="var">codeLevel</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="str">'\n'</span> &amp;&amp; <span class="var">codeLevel</span>) {<br/>
						<span class="in2"></span><span class="keyword">if</span> (<span class="var">codeLevel</span> == <span class="num">3</span>) {<br/>
						<span class="in3"></span><span class="var">inCode</span> = <span class="keyword">true</span>;<br/>
						<span class="in3"></span><span class="keyword">continue</span>;<br/>
						<span class="in2"></span>}<br/>
						<span class="in2"></span><span class="var">codeLevel</span> = <span class="num">0</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch in HTML code</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">startOfLine</span> &amp;&amp; <span class="var">ch</span> == <span class="str">'`'</span>) {<br/>
						<span class="in2"></span>++<span class="var">codeLevel</span>;<br/>
						<span class="in2"></span><span class="keyword">continue</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="str">'\n'</span> &amp;&amp; <span class="var">codeLevel</span>) {<br/>
						<span class="in2"></span><span class="keyword">if</span> (<span class="var">codeLevel</span> == <span class="num">3</span>) {<br/>
						<span class="in3"></span><span class="var">inCode</span> = <span class="keyword">false</span>;<br/>
						<span class="in3"></span><span class="keyword">continue</span>;<br/>
						<span class="in2"></span>}<br/>
						<span class="in2"></span><span class="var">codeLevel</span> = <span class="num">0</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="in1"></span>fputc(ch, out);<br/>
						<span class="end">@end(<span class="macro-name">process ch in HTML code</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process header in HTML</span>)</span> <br/>
						<span class="in1"></span><span class="fn">ASSERT</span>(bc &lt; buffer + sizeof(buffer) - <span class="num">1</span>);<br/>
						<span class="in1"></span>*<span class="var">bc</span> = <span class="str">'\0'</span>;<br/>
						<span class="in1"></span><span class="expand">@expand(<span class="macro-name">close previous HTML page</span>)</span>;<br/>
						<span class="in1"></span><span class="expand">@expand(<span class="macro-name">write header tag</span>)</span>;<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;div class=\"slides\"&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;div&gt;&lt;div&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="expand">@expand(<span class="macro-name">write header tag</span>)</span>;<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/div&gt;\n"</span>);<br/>
						<span class="end">@end(<span class="macro-name">process header in HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">close previous HTML page</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">wroteHeader</span>) {<br/>
						<span class="in2"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/div&gt;\n"</span>);<br/>
						<span class="in2"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/div&gt;\n"</span>);<br/>
						<span class="in1"></span>} <span class="keyword">else</span> {<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">write HTML header</span>)</span>;<br/>
						<span class="in2"></span><span class="var">wroteHeader</span> = <span class="keyword">true</span>;<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">close previous HTML page</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">global elements</span>)</span> <br/>
						<span class="in1"></span><span class="type">void</span> <span class="fn">writeEscaped</span>(<br/>
						<span class="in2"></span><span class="type">FILE *</span><span class="var">out</span>, <span class="type">const char *</span><span class="var">str</span><br/>
						<span class="in1"></span>) {<br/>
						<span class="in2"></span><span class="fn">ASSERT</span>(<span class="var">out</span>); <span class="fn">ASSERT</span>(<span class="var">str</span>);<br/>
						<span class="in2"></span><span class="keyword">for</span> (; *<span class="var">str</span>; ++<span class="var">str</span>) <span class="keyword">switch</span> (*<span class="var">str</span>) {<br/>
						<span class="in3"></span><span class="keyword">case</span> <span class="str">'&lt;'</span>:<br/>
						<span class="in4"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&amp;lt;"</span>); <span class="keyword">break</span>;<br/>
						<span class="in3"></span><span class="keyword">case</span> <span class="str">'&gt;'</span>:<br/>
						<span class="in4"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&amp;gt;"</span>); <span class="keyword">break</span>;<br/>
						<span class="in3"></span><span class="keyword">case</span> <span class="str">'&amp;'</span>:<br/>
						<span class="in4"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&amp;amp;"</span>); <span class="keyword">break</span>;<br/>
						<span class="in3"></span><span class="keyword">default:</span><br/>
						<span class="in4"></span><span class="fn">fputc</span>(*<span class="var">str</span>, <span class="var">out</span>);<br/>
						<span class="in2"></span>}<br/>
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">global elements</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write header tag</span>)</span> <br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;h%d&gt;"</span>, <span class="var">headerLevel</span>);<br/>
						<span class="in1"></span><span class="fn">writeEscaped</span>(<span class="var">out</span>, <span class="var">buffer</span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/h%d&gt;\n"</span>, <span class="var">headerLevel</span>);<br/>
						<span class="end">@end(<span class="macro-name">write header tag</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write HTML header</span>)</span> <br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;!doctype html&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;html lang=\"de\"l&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;head&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="expand">@expand(<span class="macro-name">write HTML header entries</span>)</span>;<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/head&gt;\n"</span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;body&gt;\n"</span>);<br/>
						<span class="end">@end(<span class="macro-name">write HTML header</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">write HTML header entries</span>)</span> <br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<br/>
						<span class="in2"></span><span class="var">out</span>, <span class="str">"&lt;meta charset=\"utf-8\"&gt;\n"</span><br/>
						<span class="in1"></span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<br/>
						<span class="in2"></span><span class="var">out</span>, <span class="str">"&lt;title&gt;%s&lt;/title&gt;\n"</span>, <span class="var">buffer</span><br/>
						<span class="in1"></span>);<br/>
						<span class="in1"></span><span class="fn">fprintf</span>(<br/>
						<span class="in2"></span><span class="var">out</span>, <span class="str">"&lt;link rel=\"stylesheet\" "</span><br/>
						<span class="in2"></span><span class="str">"type=\"text/css\" "</span><br/>
						<span class="in2"></span><span class="str">"href=\"slides/slides.css\"&gt;"</span><br/>
						<span class="in1"></span>);<br/>
						<span class="end">@end(<span class="macro-name">write HTML header entries</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div><div>
					<div><code>
						<span class="add">@add(<span class="macro-name">process ch for HTML</span>)</span> <br/>
						<span class="in1"></span><span class="keyword">if</span> (<span class="var">ch</span> == <span class="keyword">EOF</span>) {<br/>
						<span class="in2"></span><span class="expand">@expand(<span class="macro-name">close previous HTML page</span>)</span>;<br/>
						<span class="in2"></span><span class="fn">fprintf</span>(<span class="var">out</span>, <span class="str">"&lt;/body&gt;&lt;/html&gt;\n"</span>);
						<span class="in1"></span>}<br/>
						<span class="end">@end(<span class="macro-name">process ch for HTML</span>)</span>
					</code></div>
					<ul>
						<li>

						</li>
					</ul>
				</div>
		</div>
	</body>
</html>
